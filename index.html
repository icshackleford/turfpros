        // Sample customer data with service history
        let customers = [
            {
                id: 1,
                firstName: 'Michael',
                lastName: 'Johnson',
                email: 'mjohnson@email.com',
                phone: '(555) 123-4567',
                address: '123 Oak Street',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '8500',
                serviceType: 'weekly-mow',
                serviceRate: '75.00',
                notes: 'Gate code: 1234, Dog in backyard',
                status: 'active',
                joinDate: '2024-03-15',
                lastService: '2024-09-20',
                nextService: '2024-09-27',
                serviceHistory: [
                    { date: '2024-09-20', service: 'Weekly Mowing', amount: 75.00, status: 'completed' },
                    { date: '2024-09-13', service: 'Weekly Mowing', amount: 75.00, status: 'completed' },
                    { date: '2024-09-06', service: 'Weekly Mowing', amount: 75.00, status: 'completed' },
                    { date: '2024-08-30', service: 'Fertilization', amount: 120.00, status: 'completed' }
                ],
                totalRevenue: 345.00
            },
            {
                id: 2,
                firstName: 'Sarah',
                lastName: 'Smith',
                email: 'ssmith@email.com',
                phone: '(555) 234-5678',
                address: '456 Pine Avenue',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '12000',
                serviceType: 'bi-weekly-mow',
                serviceRate: '95.00',
                notes: 'Side gate access only',
                status: 'active',
                joinDate: '2024-02-10',
                lastService: '2024-09-22',
                nextService: '2024-10-06',
                serviceHistory: [
                    { date: '2024-09-22', service: 'Bi-Weekly Mowing', amount: 95.00, status: 'completed' },
                    { date: '2024-09-08', service: 'Bi-Weekly Mowing', amount: 95.00, status: 'completed' },
                    { date: '2024-08-25', service: 'Hedge Trimming', amount: 150.00, status: 'completed' }
                ],
                totalRevenue: 340.00
            },
            {
                id: 3,
                firstName: 'Robert',
                lastName: 'Davis',
                email: 'rdavis@email.com',
                phone: '(555) 345-6789',
                address: '789 Maple Drive',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '6500',
                serviceType: 'weekly-mow',
                serviceRate: '65.00',
                notes: 'Key under flower pot',
                status: 'active',
                joinDate: '2024-01-20',
                lastService: '2024-09-18',
                nextService: '2024-09-25',
                serviceHistory: [
                    { date: '2024-09-18', service: 'Weekly Mowing', amount: 65.00, status: 'completed' },
                    { date: '2024-09-11', service: 'Weekly Mowing', amount: 65.00, status: 'completed' },
                    { date: '2024-09-04', service: 'Weekly Mowing', amount: 65.00, status: 'completed' }
                ],
                totalRevenue: 195.00
            },
            {
                id: 4,
                firstName: 'Emily',
                lastName: 'Wilson',
                email: 'ewilson@email.com',
                phone: '(555) 456-7890',
                address: '321 Elm Way',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '15000',
                serviceType: 'landscaping',
                serviceRate: '150<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TurfPros - Business Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Top Navigation -->
    <nav class="bg-white border-b border-gray-200 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">TP</span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-900">TurfPros</h1>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <i data-feather="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input
                        type="text"
                        placeholder="Search customers, jobs..."
                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                    />
                </div>
                <button class="relative p-2 text-gray-600 hover:text-gray-900">
                    <i data-feather="bell" class="w-6 h-6"></i>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>
                <div class="w-8 h-8 bg-gray-300 rounded-full"></div>
            </div>
        </div>
    </nav>

    <div class="flex">
        <!-- Sidebar -->
        <div class="w-64 bg-white border-r border-gray-200 min-h-screen">
            <div class="p-6">
                <nav class="space-y-2">
                    <button onclick="showSection('dashboard')" id="nav-dashboard" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors bg-green-50 text-green-700 border border-green-200">
                        <i data-feather="home" class="w-5 h-5"></i>
                        <span class="font-medium">Dashboard</span>
                    </button>
                    <button onclick="showSection('schedule')" id="nav-schedule" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="calendar" class="w-5 h-5"></i>
                        <span class="font-medium">Schedule</span>
                    </button>
                    <button onclick="showSection('customers')" id="nav-customers" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="users" class="w-5 h-5"></i>
                        <span class="font-medium">Customers</span>
                    </button>
                    <button onclick="showSection('invoices')" id="nav-invoices" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="file-text" class="w-5 h-5"></i>
                        <span class="font-medium">Invoices</span>
                    </button>
                    <button onclick="showSection('fleet')" id="nav-fleet" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="truck" class="w-5 h-5"></i>
                        <span class="font-medium">Fleet</span>
                    </button>
                    <button onclick="showSection('reports')" id="nav-reports" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="trending-up" class="w-5 h-5"></i>
                        <span class="font-medium">Reports</span>
                    </button>
                    <button onclick="showSection('settings')" id="nav-settings" class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50">
                        <i data-feather="settings" class="w-5 h-5"></i>
                        <span class="font-medium">Settings</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-8">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="content-section">
                <!-- Key Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover-lift fade-in">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Today's Revenue</p>
                                <p class="text-3xl font-bold text-gray-900">$1,240</p>
                                <p class="text-sm text-green-600 flex items-center mt-1">
                                    <i data-feather="trending-up" class="w-4 h-4 mr-1"></i>
                                    +12% from yesterday
                                </p>
                            </div>
                            <div class="p-3 bg-green-100 rounded-full">
                                <i data-feather="dollar-sign" class="w-6 h-6 text-green-600"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover-lift fade-in">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Jobs Today</p>
                                <p class="text-3xl font-bold text-gray-900">8</p>
                                <p class="text-sm text-blue-600">4 scheduled, 1 in progress</p>
                            </div>
                            <div class="p-3 bg-blue-100 rounded-full">
                                <i data-feather="calendar" class="w-6 h-6 text-blue-600"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover-lift fade-in">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Active Customers</p>
                                <p class="text-3xl font-bold text-gray-900">47</p>
                                <p class="text-sm text-green-600">+3 this week</p>
                            </div>
                            <div class="p-3 bg-purple-100 rounded-full">
                                <i data-feather="users" class="w-6 h-6 text-purple-600"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover-lift fade-in">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Fleet Status</p>
                                <p class="text-3xl font-bold text-gray-900">3/4</p>
                                <p class="text-sm text-gray-600">Trucks active</p>
                            </div>
                            <div class="p-3 bg-orange-100 rounded-full">
                                <i data-feather="truck" class="w-6 h-6 text-orange-600"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Schedule -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 mb-6">
                    <div class="p-6 border-b border-gray-100">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">Today's Schedule</h2>
                            <div class="flex space-x-2">
                                <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2">
                                    <i data-feather="plus" class="w-4 h-4"></i>
                                    <span>Add Job</span>
                                </button>
                                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2">
                                    <i data-feather="map-pin" class="w-4 h-4"></i>
                                    <span>Route</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg">
                                        <i data-feather="clock" class="w-6 h-6 text-green-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900">Johnson Residence</h3>
                                        <p class="text-sm text-gray-600">123 Oak St</p>
                                        <p class="text-sm text-gray-500">Weekly Mow</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-lg font-bold text-gray-900">$75</span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">scheduled</span>
                                    </div>
                                    <p class="text-sm text-gray-500">8:00 AM</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg">
                                        <i data-feather="clock" class="w-6 h-6 text-green-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900">Smith Property</h3>
                                        <p class="text-sm text-gray-600">456 Pine Ave</p>
                                        <p class="text-sm text-gray-500">Fertilization</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-lg font-bold text-gray-900">$120</span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">in progress</span>
                                    </div>
                                    <p class="text-sm text-gray-500">10:30 AM</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg">
                                        <i data-feather="clock" class="w-6 h-6 text-green-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900">Davis Lawn Care</h3>
                                        <p class="text-sm text-gray-600">789 Maple Dr</p>
                                        <p class="text-sm text-gray-500">Hedge Trimming</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-lg font-bold text-gray-900">$95</span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">scheduled</span>
                                    </div>
                                    <p class="text-sm text-gray-500">2:00 PM</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="flex items-center space-x-4">
                                    <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg">
                                        <i data-feather="clock" class="w-6 h-6 text-green-600"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900">Wilson Estate</h3>
                                        <p class="text-sm text-gray-600">321 Elm Way</p>
                                        <p class="text-sm text-gray-500">Cleanup</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-lg font-bold text-gray-900">$150</span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">scheduled</span>
                                    </div>
                                    <p class="text-sm text-gray-500">3:30 PM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Recent Customers -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div class="p-6 border-b border-gray-100">
                            <h2 class="text-xl font-bold text-gray-900">Recent Customers</h2>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">Michael Johnson</h3>
                                        <div class="flex items-center space-x-4 text-sm text-gray-500 mt-1">
                                            <span class="flex items-center"><i data-feather="phone" class="w-3 h-3 mr-1"></i>(555) 123-4567</span>
                                            <span class="flex items-center"><i data-feather="mail" class="w-3 h-3 mr-1"></i>mjohnson@email.com</span>
                                        </div>
                                    </div>
                                    <div class="text-right text-sm">
                                        <p class="text-gray-600">Next: 2024-09-27</p>
                                        <p class="text-gray-500">Last: 2024-09-20</p>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">Sarah Smith</h3>
                                        <div class="flex items-center space-x-4 text-sm text-gray-500 mt-1">
                                            <span class="flex items-center"><i data-feather="phone" class="w-3 h-3 mr-1"></i>(555) 234-5678</span>
                                            <span class="flex items-center"><i data-feather="mail" class="w-3 h-3 mr-1"></i>ssmith@email.com</span>
                                        </div>
                                    </div>
                                    <div class="text-right text-sm">
                                        <p class="text-gray-600">Next: 2024-09-29</p>
                                        <p class="text-gray-500">Last: 2024-09-22</p>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">Robert Davis</h3>
                                        <div class="flex items-center space-x-4 text-sm text-gray-500 mt-1">
                                            <span class="flex items-center"><i data-feather="phone" class="w-3 h-3 mr-1"></i>(555) 345-6789</span>
                                            <span class="flex items-center"><i data-feather="mail" class="w-3 h-3 mr-1"></i>rdavis@email.com</span>
                                        </div>
                                    </div>
                                    <div class="text-right text-sm">
                                        <p class="text-gray-600">Next: 2024-09-25</p>
                                        <p class="text-gray-500">Last: 2024-09-18</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Invoices & Payments -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                        <div class="p-6 border-b border-gray-100">
                            <h2 class="text-xl font-bold text-gray-900">Recent Invoices</h2>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">INV-001</h3>
                                        <p class="text-sm text-gray-600">Johnson Residence</p>
                                        <p class="text-sm text-gray-500">2024-09-20</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold text-gray-900">$300</p>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">paid</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">INV-002</h3>
                                        <p class="text-sm text-gray-600">Smith Property</p>
                                        <p class="text-sm text-gray-500">2024-09-22</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold text-gray-900">$480</p>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">pending</span>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-gray-900">INV-003</h3>
                                        <p class="text-sm text-gray-600">Davis Lawn Care</p>
                                        <p class="text-sm text-gray-500">2024-09-15</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold text-gray-900">$380</p>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">overdue</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Section -->
            <div id="customers-section" class="content-section hidden">
                <div class="mb-6 flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900">Customer Management</h2>
                    <button onclick="showAddCustomerModal()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2">
                        <i data-feather="plus" class="w-4 h-4"></i>
                        <span>Add New Customer</span>
                    </button>
                </div>

                <!-- Customer Search -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
                    <div class="flex items-center space-x-4">
                        <div class="relative flex-1">
                            <i data-feather="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input
                                type="text"
                                id="customer-search"
                                placeholder="Search customers by name, phone, or address..."
                                class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                onkeyup="filterCustomers()"
                            />
                        </div>
                        <select class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <option value="">All Customers</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>

                <!-- Customer List -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="p-6 border-b border-gray-100">
                        <h3 class="text-lg font-semibold text-gray-900">Customer List</h3>
                    </div>
                    <div class="p-6">
                        <div id="customer-list" class="space-y-4">
                            <!-- Customer cards will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Customer Modal -->
            <div id="customer-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
                    <div class="p-6 border-b border-gray-100">
                        <div class="flex items-center justify-between">
                            <h3 id="customer-modal-title" class="text-xl font-bold text-gray-900">Add New Customer</h3>
                            <button onclick="hideCustomerModal()" class="text-gray-400 hover:text-gray-600">
                                <i data-feather="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <form id="customer-form" onsubmit="saveCustomer(event)">
                            <input type="hidden" id="customer-id" name="customerId">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Personal Information -->
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">Personal Information</h4>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                                        <input type="text" name="firstName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                                        <input type="text" name="lastName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                        <input type="email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone *</label>
                                        <input type="tel" name="phone" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                        <select name="status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Property Information -->
                                <div class="space-y-4">
                                    <h4 class="font-semibold text-gray-900">Property Information</h4>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Property Address *</label>
                                        <input type="text" name="address" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">City *</label>
                                        <input type="text" name="city" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">State *</label>
                                            <input type="text" name="state" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">ZIP Code *</label>
                                            <input type="text" name="zip" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Property Size (sq ft)</label>
                                        <input type="number" name="propertySize" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                </div>
                            </div>

                            <!-- Service Information -->
                            <div class="mt-6">
                                <h4 class="font-semibold text-gray-900 mb-4">Service Information</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Service Type</label>
                                        <select name="serviceType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                            <option value="">Select Service</option>
                                            <option value="weekly-mow">Weekly Mowing</option>
                                            <option value="bi-weekly-mow">Bi-Weekly Mowing</option>
                                            <option value="monthly-mow">Monthly Mowing</option>
                                            <option value="fertilization">Fertilization</option>
                                            <option value="landscaping">Landscaping</option>
                                            <option value="cleanup">Cleanup</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Service Rate ($)</label>
                                        <input type="number" name="serviceRate" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    </div>
                                </div>
                            </div>

                            <!-- Notes -->
                            <div class="mt-6">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                                <textarea name="notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Special instructions, gate codes, etc."></textarea>
                            </div>

                            <div class="flex justify-end space-x-4 mt-8">
                                <button type="button" onclick="hideCustomerModal()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button type="submit" id="customer-submit-btn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                    Add Customer
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Customer Detail View Modal -->
            <div id="customer-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                    <div class="p-6 border-b border-gray-100">
                        <div class="flex items-center justify-between">
                            <h3 id="customer-detail-title" class="text-xl font-bold text-gray-900">Customer Details</h3>
                            <div class="flex items-center space-x-2">
                                <button onclick="scheduleService()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2">
                                    <i data-feather="calendar" class="w-4 h-4"></i>
                                    <span>Schedule Service</span>
                                </button>
                                <button onclick="generateInvoice()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2">
                                    <i data-feather="file-text" class="w-4 h-4"></i>
                                    <span>Create Invoice</span>
                                </button>
                                <button onclick="hideCustomerDetailModal()" class="text-gray-400 hover:text-gray-600">
                                    <i data-feather="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <div id="customer-detail-content">
                            <!-- Customer details will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Service Modal -->
            <div id="schedule-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-xl max-w-md w-full">
                    <div class="p-6 border-b border-gray-100">
                        <div class="flex items-center justify-between">
                            <h3 class="text-xl font-bold text-gray-900">Schedule Service</h3>
                            <button onclick="hideScheduleModal()" class="text-gray-400 hover:text-gray-600">
                                <i data-feather="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <form id="schedule-form" onsubmit="addToCalendar(event)">
                            <input type="hidden" id="schedule-customer-id">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Service Date</label>
                                    <input type="date" name="serviceDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
                                    <input type="time" name="serviceTime" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Service Type</label>
                                    <select name="scheduleServiceType" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                        <option value="">Select Service</option>
                                        <option value="weekly-mow">Weekly Mowing</option>
                                        <option value="bi-weekly-mow">Bi-Weekly Mowing</option>
                                        <option value="monthly-mow">Monthly Mowing</option>
                                        <option value="fertilization">Fertilization</option>
                                        <option value="landscaping">Landscaping</option>
                                        <option value="cleanup">Cleanup</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Duration (hours)</label>
                                    <input type="number" name="duration" step="0.5" value="1" min="0.5" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                                    <textarea name="scheduleNotes" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"></textarea>
                                </div>
                            </div>
                            <div class="flex justify-end space-x-4 mt-6">
                                <button type="button" onclick="hideScheduleModal()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                    Cancel
                                </button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Add to Calendar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Invoice Generation Modal -->
            <div id="invoice-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
                    <div class="p-6 border-b border-gray-100">
                        <div class="flex items-center justify-between">
                            <h3 class="text-xl font-bold text-gray-900">Generate Invoice</h3>
                            <button onclick="hideInvoiceModal()" class="text-gray-400 hover:text-gray-600">
                                <i data-feather="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div id="invoice-preview" class="mb-6">
                            <!-- Invoice preview will be populated here -->
                        </div>
                        <div class="flex justify-end space-x-4">
                            <button onclick="hideInvoiceModal()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                                Cancel
                            </button>
                            <button onclick="downloadInvoice()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                Download PDF
                            </button>
                            <button onclick="saveInvoice()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                Save Invoice
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Sections -->
            <div id="other-section" class="content-section hidden">
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
                    <div class="text-center">
                        <h2 id="section-title" class="text-2xl font-bold text-gray-900 mb-4"></h2>
                        <p class="text-gray-600">
                            This section would contain the <span id="section-name"></span> functionality. 
                            Click "Dashboard" to return to the main overview.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Feather Icons
        feather.replace();

        // Sample customer data with service history and invoice tracking
        let customers = [
            {
                id: 1,
                firstName: 'Michael',
                lastName: 'Johnson',
                email: 'mjohnson@email.com',
                phone: '(555) 123-4567',
                address: '123 Oak Street',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '8500',
                serviceType: 'weekly-mow',
                serviceRate: '75.00',
                notes: 'Gate code: 1234, Dog in backyard',
                status: 'active',
                joinDate: '2024-03-15',
                lastService: '2024-09-20',
                nextService: '2024-09-27',
                serviceHistory: [
                    { date: '2024-09-20', service: 'Weekly Mowing', amount: 75.00, status: 'completed', invoiceId: 'INV-001' },
                    { date: '2024-09-13', service: 'Weekly Mowing', amount: 75.00, status: 'completed', invoiceId: 'INV-004' },
                    { date: '2024-09-06', service: 'Weekly Mowing', amount: 75.00, status: 'completed', invoiceId: 'INV-007' },
                    { date: '2024-08-30', service: 'Fertilization', amount: 120.00, status: 'completed', invoiceId: 'INV-010' }
                ],
                totalRevenue: 345.00
            },
            {
                id: 2,
                firstName: 'Sarah',
                lastName: 'Smith',
                email: 'ssmith@email.com',
                phone: '(555) 234-5678',
                address: '456 Pine Avenue',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '12000',
                serviceType: 'bi-weekly-mow',
                serviceRate: '95.00',
                notes: 'Side gate access only',
                status: 'active',
                joinDate: '2024-02-10',
                lastService: '2024-09-22',
                nextService: '2024-10-06',
                serviceHistory: [
                    { date: '2024-09-22', service: 'Bi-Weekly Mowing', amount: 95.00, status: 'completed', invoiceId: 'INV-002' },
                    { date: '2024-09-08', service: 'Bi-Weekly Mowing', amount: 95.00, status: 'completed', invoiceId: 'INV-005' },
                    { date: '2024-08-25', service: 'Hedge Trimming', amount: 150.00, status: 'completed', invoiceId: 'INV-008' }
                ],
                totalRevenue: 340.00
            },
            {
                id: 3,
                firstName: 'Robert',
                lastName: 'Davis',
                email: 'rdavis@email.com',
                phone: '(555) 345-6789',
                address: '789 Maple Drive',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '6500',
                serviceType: 'weekly-mow',
                serviceRate: '65.00',
                notes: 'Key under flower pot',
                status: 'active',
                joinDate: '2024-01-20',
                lastService: '2024-09-18',
                nextService: '2024-09-25',
                serviceHistory: [
                    { date: '2024-09-18', service: 'Weekly Mowing', amount: 65.00, status: 'completed', invoiceId: 'INV-003' },
                    { date: '2024-09-11', service: 'Weekly Mowing', amount: 65.00, status: 'completed', invoiceId: 'INV-006' },
                    { date: '2024-09-04', service: 'Weekly Mowing', amount: 65.00, status: 'completed', invoiceId: 'INV-009' }
                ],
                totalRevenue: 195.00
            },
            {
                id: 4,
                firstName: 'Emily',
                lastName: 'Wilson',
                email: 'ewilson@email.com',
                phone: '(555) 456-7890',
                address: '321 Elm Way',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '15000',
                serviceType: 'landscaping',
                serviceRate: '150.00',
                notes: 'Large property, needs 2-person crew',
                status: 'active',
                joinDate: '2024-04-05',
                lastService: '2024-09-16',
                nextService: '2024-09-30',
                serviceHistory: [
                    { date: '2024-09-16', service: 'Landscaping', amount: 150.00, status: 'completed', invoiceId: 'INV-011' },
                    { date: '2024-08-20', service: 'Cleanup', amount: 200.00, status: 'completed', invoiceId: 'INV-012' }
                ],
                totalRevenue: 350.00
            }
        ];

        let invoiceCounter = 13; // Starting from next available invoice number
        let currentCustomer = null; // Track current customer for modals

        // Navigation functionality
        function showSection(sectionName) {
            // Hide all sections
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('customers-section').style.display = 'none';
            document.getElementById('other-section').style.display = 'none';

            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.className = 'nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50';
            });

            // Add active class to current nav item
            document.getElementById('nav-' + sectionName).className = 'nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors bg-green-50 text-green-700 border border-green-200';

            if (sectionName === 'dashboard') {
                document.getElementById('dashboard-section').style.display = 'block';
            } else if (sectionName === 'customers') {
                document.getElementById('customers-section').style.display = 'block';
                renderCustomers();
            } else {
                document.getElementById('other-section').style.display = 'block';
                document.getElementById('section-title').textContent = sectionName.charAt(0).toUpperCase() + sectionName.slice(1);
                document.getElementById('section-name').textContent = sectionName;
            }

            // Reinitialize Feather Icons for new content
            feather.replace();
        }

        // Customer management functions
        function renderCustomers(customersToRender = customers) {
            const customerList = document.getElementById('customer-list');
            
            if (customersToRender.length === 0) {
                customerList.innerHTML = '<p class="text-gray-500 text-center py-8">No customers found.</p>';
                return;
            }

            customerList.innerHTML = customersToRender.map(customer => `
                <div class="border border-gray-200 rounded-lg p-6 hover:bg-gray-50">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-4 mb-4">
                                <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-full">
                                    <span class="font-semibold text-green-600">${customer.firstName.charAt(0)}${customer.lastName.charAt(0)}</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">${customer.firstName} ${customer.lastName}</h3>
                                    <p class="text-sm text-gray-600">${customer.address}, ${customer.city}, ${customer.state} ${customer.zip}</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Contact</p>
                                    <p class="text-sm text-gray-600">${customer.phone}</p>
                                    ${customer.email ? `<p class="text-sm text-gray-600">${customer.email}</p>` : ''}
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Service</p>
                                    <p class="text-sm text-gray-600">${getServiceTypeName(customer.serviceType)}</p>
                                    <p class="text-sm font-semibold text-green-600">${customer.serviceRate}</p>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Schedule</p>
                                    <p class="text-sm text-gray-600">Last: ${customer.lastService}</p>
                                    <p class="text-sm text-gray-600">Next: ${customer.nextService}</p>
                                </div>
                            </div>
                            
                            ${customer.notes ? `
                                <div class="mb-4">
                                    <p class="text-sm font-medium text-gray-700">Notes</p>
                                    <p class="text-sm text-gray-600">${customer.notes}</p>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="flex items-center space-x-2 ml-4">
                            <span class="px-2 py-1 text-xs font-medium rounded-full ${customer.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                                ${customer.status}
                            </span>
                            <button onclick="toggleCustomerStatus(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="Toggle Status">
                                <i data-feather="toggle-right" class="w-4 h-4"></i>
                            </button>
                            <button onclick="editCustomer(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="Edit Customer">
                                <i data-feather="edit-2" class="w-4 h-4"></i>
                            </button>
                            <button onclick="viewCustomerDetails(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="View Details">
                                <i data-feather="eye" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            feather.replace();
        }

        function getServiceTypeName(type) {
            const serviceTypes = {
                'weekly-mow': 'Weekly Mowing',
                'bi-weekly-mow': 'Bi-Weekly Mowing',
                'monthly-mow': 'Monthly Mowing',
                'fertilization': 'Fertilization',
                'landscaping': 'Landscaping',
                'cleanup': 'Cleanup',
                'other': 'Other'
            };
            return serviceTypes[type] || type;
        }

        function filterCustomers() {
            const searchTerm = document.getElementById('customer-search').value.toLowerCase();
            const filteredCustomers = customers.filter(customer => {
                return customer.firstName.toLowerCase().includes(searchTerm) ||
                       customer.lastName.toLowerCase().includes(searchTerm) ||
                       customer.phone.includes(searchTerm) ||
                       customer.address.toLowerCase().includes(searchTerm) ||
                       (customer.email && customer.email.toLowerCase().includes(searchTerm));
            });
            renderCustomers(filteredCustomers);
        }

        function showAddCustomerModal() {
            currentCustomer = null;
            document.getElementById('customer-modal-title').textContent = 'Add New Customer';
            document.getElementById('customer-submit-btn').textContent = 'Add Customer';
            document.getElementById('customer-form').reset();
            document.getElementById('customer-id').value = '';
            document.getElementById('customer-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideCustomerModal() {
            document.getElementById('customer-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            document.getElementById('customer-form').reset();
            currentCustomer = null;
        }

        function editCustomer(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (!customer) return;

            currentCustomer = customer;
            document.getElementById('customer-modal-title').textContent = 'Edit Customer';
            document.getElementById('customer-submit-btn').textContent = 'Update Customer';
            
            // Populate form fields
            document.getElementById('customer-id').value = customer.id;
            document.querySelector('input[name="firstName"]').value = customer.firstName;
            document.querySelector('input[name="lastName"]').value = customer.lastName;
            document.querySelector('input[name="email"]').value = customer.email || '';
            document.querySelector('input[name="phone"]').value = customer.phone;
            document.querySelector('input[name="address"]').value = customer.address;
            document.querySelector('input[name="city"]').value = customer.city;
            document.querySelector('input[name="state"]').value = customer.state;
            document.querySelector('input[name="zip"]').value = customer.zip;
            document.querySelector('input[name="propertySize"]').value = customer.propertySize || '';
            document.querySelector('select[name="serviceType"]').value = customer.serviceType || '';
            document.querySelector('input[name="serviceRate"]').value = customer.serviceRate || '';
            document.querySelector('textarea[name="notes"]').value = customer.notes || '';
            document.querySelector('select[name="status"]').value = customer.status;

            document.getElementById('customer-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function saveCustomer(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const customerId = formData.get('customerId');

            const customerData = {
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email') || '',
                phone: formData.get('phone'),
                address: formData.get('address'),
                city: formData.get('city'),
                state: formData.get('state'),
                zip: formData.get('zip'),
                propertySize: formData.get('propertySize') || '',
                serviceType: formData.get('serviceType') || '',
                serviceRate: formData.get('serviceRate') || '0.00',
                notes: formData.get('notes') || '',
                status: formData.get('status')
            };

            if (customerId) {
                // Update existing customer
                const customerIndex = customers.findIndex(c => c.id === parseInt(customerId));
                if (customerIndex !== -1) {
                    customers[customerIndex] = { ...customers[customerIndex], ...customerData };
                }
                alert('Customer updated successfully!');
            } else {
                // Add new customer
                const newCustomer = {
                    id: Math.max(...customers.map(c => c.id)) + 1,
                    ...customerData,
                    joinDate: new Date().toISOString().split('T')[0],
                    lastService: '',
                    nextService: '',
                    serviceHistory: [],
                    totalRevenue: 0
                };
                customers.push(newCustomer);
                alert('Customer added successfully!');
            }

            hideCustomerModal();
            renderCustomers();
        }

        function toggleCustomerStatus(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (customer) {
                customer.status = customer.status === 'active' ? 'inactive' : 'active';
                renderCustomers();
                alert(`Customer status changed to ${customer.status}`);
            }
        }

        function viewCustomerDetails(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (!customer) return;

            currentCustomer = customer;
            document.getElementById('customer-detail-title').textContent = `${customer.firstName} ${customer.lastName} - Customer Details`;

            const detailContent = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Customer Information -->
                    <div class="space-y-6">
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">Contact Information</h4>
                            <div class="space-y-2">
                                <p><span class="font-medium">Name:</span> ${customer.firstName} ${customer.lastName}</p>
                                <p><span class="font-medium">Phone:</span> ${customer.phone}</p>
                                ${customer.email ? `<p><span class="font-medium">Email:</span> ${customer.email}</p>` : ''}
                                <p><span class="font-medium">Status:</span> <span class="px-2 py-1 text-xs font-medium rounded-full ${customer.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">${customer.status}</span></p>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">Property Information</h4>
                            <div class="space-y-2">
                                <p><span class="font-medium">Address:</span> ${customer.address}</p>
                                <p><span class="font-medium">City:</span> ${customer.city}, ${customer.state} ${customer.zip}</p>
                                ${customer.propertySize ? `<p><span class="font-medium">Size:</span> ${customer.propertySize} sq ft</p>` : ''}
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">Service Information</h4>
                            <div class="space-y-2">
                                <p><span class="font-medium">Service Type:</span> ${getServiceTypeName(customer.serviceType)}</p>
                                <p><span class="font-medium">Rate:</span> ${customer.serviceRate}</p>
                                <p><span class="font-medium">Total Revenue:</span> ${customer.totalRevenue.toFixed(2)}</p>
                                <p><span class="font-medium">Customer Since:</span> ${customer.joinDate}</p>
                            </div>
                            ${customer.notes ? `<div class="mt-4"><p class="font-medium">Notes:</p><p class="text-gray-600">${customer.notes}</p></div>` : ''}
                        </div>
                    </div>

                    <!-- Service History -->
                    <div class="space-y-6">
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h4 class="font-semibold text-gray-900 mb-4">Service History</h4>
                            <div class="space-y-4 max-h-96 overflow-y-auto">
                                ${customer.serviceHistory.length > 0 ? 
                                    customer.serviceHistory.map(service => `
                                        <div class="bg-white p-4 rounded border border-gray-200">
                                            <div class="flex items-center justify-between mb-2">
                                                <h5 class="font-medium text-gray-900">${service.service}</h5>
                                                <span class="text-lg font-semibold text-green-600">${service.amount.toFixed(2)}</span>
                                            </div>
                                            <div class="flex items-center justify-between text-sm text-gray-600">
                                                <span>${service.date}</span>
                                                <span class="px-2 py-1 text-xs font-medium rounded-full ${service.status === 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${service.status}</span>
                                            </div>
                                            ${service.invoiceId ? `<p class="text-sm text-gray-500 mt-1">Invoice: ${service.invoiceId}</p>` : ''}
                                        </div>
                                    `).join('') : 
                                    '<p class="text-gray-500">No service history available.</p>'
                                }
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('customer-detail-content').innerHTML = detailContent;
            document.getElementById('customer-detail-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideCustomerDetailModal() {
            document.getElementById('customer-detail-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Scheduling functions
        function scheduleService() {
            if (!currentCustomer) return;

            document.getElementById('schedule-customer-id').value = currentCustomer.id;
            document.querySelector('select[name="scheduleServiceType"]').value = currentCustomer.serviceType;
            document.getElementById('schedule-modal').classList.remove('hidden');
        }

        function hideScheduleModal() {
            document.getElementById('schedule-modal').classList.add('hidden');
            document.getElementById('schedule-form').reset();
        }

        function addToCalendar(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const eventData = {
                title: `${getServiceTypeName(formData.get('scheduleServiceType'))} - ${currentCustomer.firstName} ${currentCustomer.lastName}`,
                location: `${currentCustomer.address}, ${currentCustomer.city}, ${currentCustomer.state} ${currentCustomer.zip}`,
                description: `Service: ${getServiceTypeName(formData.get('scheduleServiceType'))}\\nCustomer: ${currentCustomer.firstName} ${currentCustomer.lastName}\\nPhone: ${currentCustomer.phone}\\nNotes: ${formData.get('scheduleNotes')}`,
                date: formData.get('serviceDate'),
                time: formData.get('serviceTime'),
                duration: parseFloat(formData.get('duration'))
            };

            // Create Google Calendar link
            const startDateTime = new Date(`${eventData.date}T${eventData.time}`);
            const endDateTime = new Date(startDateTime.getTime() + (eventData.duration * 60 * 60 * 1000));
            
            const googleCalendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventData.title)}&dates=${startDateTime.toISOString().replace(/[-:]/g, '').replace(/\\.\\d{3}/, '')}//${endDateTime.toISOString().replace(/[-:]/g, '').replace(/\\.\\d{3}/, '')}&location=${encodeURIComponent(eventData.location)}&details=${encodeURIComponent(eventData.description)}`;

            // Open Google Calendar in new window
            window.open(googleCalendarUrl, '_blank');

            hideScheduleModal();
            hideCustomerDetailModal();
            alert('Service scheduled! Google Calendar should open in a new tab.');
        }

        // Invoice generation functions
        function generateInvoice() {
            if (!currentCustomer) return;

            const invoiceId = `INV-${invoiceCounter.toString().padStart(3, '0')}`;
            const today = new Date().toISOString().split('T')[0];
            const dueDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]; // 30 days from now

            const invoicePreview = `
                <div class="bg-white border border-gray-200 rounded-lg p-8">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">TurfPros</h2>
                            <p class="text-gray-600">Professional Lawn Care Services</p>
                        </div>
                        <div class="text-right">
                            <h3 class="text-xl font-bold text-gray-900">INVOICE</h3>
                            <p class="text-gray-600">${invoiceId}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8 mb-8">
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-2">Bill To:</h4>
                            <p class="text-gray-700">${currentCustomer.firstName} ${currentCustomer.lastName}</p>
                            <p class="text-gray-700">${currentCustomer.address}</p>
                            <p class="text-gray-700">${currentCustomer.city}, ${currentCustomer.state} ${currentCustomer.zip}</p>
                            <p class="text-gray-700">${currentCustomer.phone}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-700"><span class="font-medium">Invoice Date:</span> ${today}</p>
                            <p class="text-gray-700"><span class="font-medium">Due Date:</span> ${dueDate}</p>
                        </div>
                    </div>

                    <div class="border border-gray-200 rounded-lg overflow-hidden mb-8">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left font-medium text-gray-900">Service</th>
                                    <th class="px-4 py-3 text-right font-medium text-gray-900">Amount</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-3 text-gray-700">${getServiceTypeName(currentCustomer.serviceType)}</td>
                                    <td class="px-4 py-3 text-right text-gray-900 font-semibold">${currentCustomer.serviceRate}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-end mb-8">
                        <div class="text-right">
                            <p class="text-xl font-bold text-gray-900">Total: ${currentCustomer.serviceRate}</p>
                        </div>
                    </div>

                    <div class="text-sm text-gray-600">
                        <p class="mb-2">Thank you for choosing TurfPros for your lawn care needs!</p>
                        <p>Payment is due within 30 days. Please contact us if you have any questions.</p>
                    </div>
                </div>
            `;

            document.getElementById('invoice-preview').innerHTML = invoicePreview;
            document.getElementById('invoice-modal').classList.remove('hidden');
        }

        function hideInvoiceModal() {
            document.getElementById('invoice-modal').classList.add('hidden');
        }

        function saveInvoice() {
            const invoiceId = `INV-${invoiceCounter.toString().padStart(3, '0')}`;
            const today = new Date().toISOString().split('T')[0];

            // Add to customer's service history
            const newService = {
                date: today,
                service: getServiceTypeName(currentCustomer.serviceType),
                amount: parseFloat(currentCustomer.serviceRate),
                status: 'completed',
                invoiceId: invoiceId
            };

            currentCustomer.serviceHistory.unshift(newService);
            currentCustomer.totalRevenue += parseFloat(currentCustomer.serviceRate);
            currentCustomer.lastService = today;

            invoiceCounter++;
            hideInvoiceModal();
            hideCustomerDetailModal();
            alert(`Invoice ${invoiceId} saved successfully!`);
        }

        function downloadInvoice() {
            alert('PDF download functionality would be implemented here. The invoice would be converted to PDF and downloaded.');
        }

        // Initialize the dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            showSection('dashboard');
        });

        // Close modals when clicking outside
        document.getElementById('customer-modal').addEventListener('click', function(e) {
            if (e.target === this) hideCustomerModal();
        });

        document.getElementById('customer-detail-modal').addEventListener('click', function(e) {
            if (e.target === this) hideCustomerDetailModal();
        });

        document.getElementById('schedule-modal').addEventListener('click', function(e) {
            if (e.target === this) hideScheduleModal();
        });

        document.getElementById('invoice-modal').addEventListener('click', function(e) {
            if (e.target === this) hideInvoiceModal();
        });propertySize: '12000',
                serviceType: 'bi-weekly-mow',
                serviceRate: '95.00',
                notes: 'Side gate access only',
                status: 'active',
                joinDate: '2024-02-10',
                lastService: '2024-09-22',
                nextService: '2024-10-06'
            },
            {
                id: 3,
                firstName: 'Robert',
                lastName: 'Davis',
                email: 'rdavis@email.com',
                phone: '(555) 345-6789',
                address: '789 Maple Drive',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '6500',
                serviceType: 'weekly-mow',
                serviceRate: '65.00',
                notes: 'Key under flower pot',
                status: 'active',
                joinDate: '2024-01-20',
                lastService: '2024-09-18',
                nextService: '2024-09-25'
            },
            {
                id: 4,
                firstName: 'Emily',
                lastName: 'Wilson',
                email: 'ewilson@email.com',
                phone: '(555) 456-7890',
                address: '321 Elm Way',
                city: 'Clayton',
                state: 'NC',
                zip: '27520',
                propertySize: '15000',
                serviceType: 'landscaping',
                serviceRate: '150.00',
                notes: 'Large property, needs 2-person crew',
                status: 'active',
                joinDate: '2024-04-05',
                lastService: '2024-09-16',
                nextService: '2024-09-30'
            }
        ];

        // Navigation functionality
        function showSection(sectionName) {
            // Hide all sections
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('customers-section').style.display = 'none';
            document.getElementById('other-section').style.display = 'none';

            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.className = 'nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors text-gray-700 hover:bg-gray-50';
            });

            // Add active class to current nav item
            document.getElementById('nav-' + sectionName).className = 'nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors bg-green-50 text-green-700 border border-green-200';

            if (sectionName === 'dashboard') {
                document.getElementById('dashboard-section').style.display = 'block';
            } else if (sectionName === 'customers') {
                document.getElementById('customers-section').style.display = 'block';
                renderCustomers();
            } else {
                document.getElementById('other-section').style.display = 'block';
                document.getElementById('section-title').textContent = sectionName.charAt(0).toUpperCase() + sectionName.slice(1);
                document.getElementById('section-name').textContent = sectionName;
            }

            // Reinitialize Feather Icons for new content
            feather.replace();
        }

        // Customer management functions
        function renderCustomers(customersToRender = customers) {
            const customerList = document.getElementById('customer-list');
            
            if (customersToRender.length === 0) {
                customerList.innerHTML = '<p class="text-gray-500 text-center py-8">No customers found.</p>';
                return;
            }

            customerList.innerHTML = customersToRender.map(customer => `
                <div class="border border-gray-200 rounded-lg p-6 hover:bg-gray-50">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-4 mb-4">
                                <div class="flex items-center justify-center w-12 h-12 bg-green-100 rounded-full">
                                    <span class="font-semibold text-green-600">${customer.firstName.charAt(0)}${customer.lastName.charAt(0)}</span>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">${customer.firstName} ${customer.lastName}</h3>
                                    <p class="text-sm text-gray-600">${customer.address}, ${customer.city}, ${customer.state} ${customer.zip}</p>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Contact</p>
                                    <p class="text-sm text-gray-600">${customer.phone}</p>
                                    ${customer.email ? `<p class="text-sm text-gray-600">${customer.email}</p>` : ''}
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Service</p>
                                    <p class="text-sm text-gray-600">${getServiceTypeName(customer.serviceType)}</p>
                                    <p class="text-sm font-semibold text-green-600">${customer.serviceRate}</p>
                                </div>
                                <div>
                                    <p class="text-sm font-medium text-gray-700">Schedule</p>
                                    <p class="text-sm text-gray-600">Last: ${customer.lastService}</p>
                                    <p class="text-sm text-gray-600">Next: ${customer.nextService}</p>
                                </div>
                            </div>
                            
                            ${customer.notes ? `
                                <div class="mb-4">
                                    <p class="text-sm font-medium text-gray-700">Notes</p>
                                    <p class="text-sm text-gray-600">${customer.notes}</p>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="flex items-center space-x-2 ml-4">
                            <span class="px-2 py-1 text-xs font-medium rounded-full ${customer.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                                ${customer.status}
                            </span>
                            <button onclick="toggleCustomerStatus(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="Toggle Status">
                                <i data-feather="toggle-right" class="w-4 h-4"></i>
                            </button>
                            <button onclick="editCustomer(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="Edit Customer">
                                <i data-feather="edit-2" class="w-4 h-4"></i>
                            </button>
                            <button onclick="viewCustomerDetails(${customer.id})" class="p-2 text-gray-400 hover:text-gray-600" title="View Details">
                                <i data-feather="eye" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            feather.replace();
        }

        function getServiceTypeName(type) {
            const serviceTypes = {
                'weekly-mow': 'Weekly Mowing',
                'bi-weekly-mow': 'Bi-Weekly Mowing',
                'monthly-mow': 'Monthly Mowing',
                'fertilization': 'Fertilization',
                'landscaping': 'Landscaping',
                'cleanup': 'Cleanup',
                'other': 'Other'
            };
            return serviceTypes[type] || type;
        }

        function filterCustomers() {
            const searchTerm = document.getElementById('customer-search').value.toLowerCase();
            const filteredCustomers = customers.filter(customer => {
                return customer.firstName.toLowerCase().includes(searchTerm) ||
                       customer.lastName.toLowerCase().includes(searchTerm) ||
                       customer.phone.includes(searchTerm) ||
                       customer.address.toLowerCase().includes(searchTerm) ||
                       (customer.email && customer.email.toLowerCase().includes(searchTerm));
            });
            renderCustomers(filteredCustomers);
        }

        function showAddCustomerModal() {
            document.getElementById('customer-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideAddCustomerModal() {
            document.getElementById('customer-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            document.getElementById('customer-form').reset();
        }

        function addCustomer(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const newCustomer = {
                id: customers.length + 1,
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email') || '',
                phone: formData.get('phone'),
                address: formData.get('address'),
                city: formData.get('city'),
                state: formData.get('state'),
                zip: formData.get('zip'),
                propertySize: formData.get('propertySize') || '',
                serviceType: formData.get('serviceType') || '',
                serviceRate: formData.get('serviceRate') || '0.00',
                notes: formData.get('notes') || '',
                status: 'active',
                joinDate: new Date().toISOString().split('T')[0],
                lastService: '',
                nextService: ''
            };

            customers.push(newCustomer);
            hideAddCustomerModal();
            renderCustomers();
            
            // Show success message
            alert('Customer added successfully!');
        }

        function editCustomer(customerId) {
            alert('Edit customer functionality would open an edit form for customer ID: ' + customerId);
        }

        function viewCustomerDetails(customerId) {
            alert('Customer details view would open for customer ID: ' + customerId);
        }

        // Initialize the dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            showSection('dashboard');
        });

        // Close modal when clicking outside
        document.getElementById('customer-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideAddCustomerModal();
            }
        });
    </script>
</body>
</html>